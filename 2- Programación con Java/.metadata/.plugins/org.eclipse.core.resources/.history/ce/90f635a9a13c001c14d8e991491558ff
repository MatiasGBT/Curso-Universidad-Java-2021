package peliculas.negocio;

import javax.swing.JOptionPane;

import peliculas.datos.AccesoDatosImpl;
import peliculas.domain.Pelicula;

public class CatalogoPeliculasImpl implements CatalogoPeliculas{
	
	public Pelicula catalogo[]=new Pelicula[100];
	
	@Override
	public void agregarPelicula(String nombreArchivo) {
		int i=0;
		String nombre=JOptionPane.showInputDialog("Ingrese el nombre de la peli para agregar");
		String director=JOptionPane.showInputDialog("Ingrese el nombre del director de la peli para agregar");
		double duracion=Double.parseDouble(JOptionPane.showInputDialog("Ingrese la duración de la peli para agregar"));
		String genero=JOptionPane.showInputDialog("Ingrese el genero de la peli para agregar");
		for (i = 0; i < catalogo.length && catalogo[i]!=null; i++);
		if (i<catalogo.length) {
			catalogo[i]=new Pelicula(nombre,director,duracion,genero);
			AccesoDatosImpl acceso=new AccesoDatosImpl();
			acceso.escribir(catalogo[i], nombreArchivo);
		}
	}
	
	public void mostrar() {
		for (int i = 0; i < catalogo.length; i++) {
			if (catalogo[i]!=null) {
				System.out.println(catalogo[i]);
			}
		}
		
	}

	@Override
	public void listarPeliculas(String nombreArchivo) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void buscarPelicula(String nombreArchivo, String nombrePeli) {
		for (int i = 0; i < catalogo.length; i++) {
			if (catalogo[i]!=null && catalogo[i].getNombre().equalsIgnoreCase(nombrePeli)) {
				System.out.println(catalogo[i].toString());
			} else {
				System.out.println("No se encontro la peli que buscas.");
			}
		}
		
	}

	//Este método crea el archivo y lo abre.
	@Override
	public void iniciarArchivo(String nombreArchivo) {
		AccesoDatosImpl acceso=new AccesoDatosImpl();
		acceso.existe(nombreArchivo);
	}

	@Override
	public void borrarPelicula(String nombreArchivo) {
		int id=Integer.parseInt(JOptionPane.showInputDialog("Ingrese el ID de la película a borrar"));
		if (catalogo[id]!=null) {
			catalogo[id]=null;
			AccesoDatosImpl acceso=new AccesoDatosImpl();
			acceso.borrarLinea(nombreArchivo, catalogo, id);
			System.out.println("Se borro la película correctamente.");
		} else {
			System.out.println("No se encontro la película.");
		}
	}

}
